<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessible Calendar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        .calendar {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .navigation {
            margin-bottom: 20px;
        }
        .days {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            width: 100%;
        }
        .dates {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            width: 100%;
        }
        .dates div {
            width: 14.28%;
            padding: 10px;
            box-sizing: border-box;
            text-align: center;
            border: 1px solid #ccc;
        }
        .today {
            background-color: yellow;
        }
        .event {
            background-color: lightgreen;
            border: 1px solid green;
            margin-top: 5px;
        }
    </style>
</head>
<body>

    <div class="calendar" role="grid" aria-labelledby="calendarTitle">
        <div class="navigation">
            <button id="prevMonth" aria-label="Previous Month">Previous</button>
            <h1 id="monthYear"></h1>
            <button id="nextMonth" aria-label="Next Month">Next</button>
        </div>
        <div class="days">
            <div>Sunday</div>
            <div>Monday</div>
            <div>Tuesday</div>
            <div>Wednesday</div>
            <div>Thursday</div>
            <div>Friday</div>
            <div>Saturday</div>
        </div>
        <div class="dates" id="dates"></div>
    </div>

    <script>
        let selectedDate = new Date();
        let currentMonth = selectedDate.getMonth();
        let currentYear = selectedDate.getFullYear();

        function drawCalendar(month, year) {
            const monthYearEl = document.getElementById('monthYear');
            const datesEl = document.getElementById('dates');
            const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            monthYearEl.innerHTML = `${months[month]} ${year}`;

            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            datesEl.innerHTML = '';

            // Fill in empty days before the first day of the month
            for (let i = 0; i < firstDay; i++) {
                datesEl.innerHTML += `<div aria-hidden="true"></div>`;
            }

            const events = JSON.parse(localStorage.getItem('calendarEvents')) || {};

            // Fill in the days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dateDiv = document.createElement('div');
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                dateDiv.innerText = day;
                dateDiv.dataset.date = dateStr;
                dateDiv.setAttribute('aria-label', `Date: ${day} ${months[month]} ${year}`);

                // Highlight today's date
                if (month === selectedDate.getMonth() && day === selectedDate.getDate() && year === selectedDate.getFullYear()) {
                    dateDiv.classList.add('today');
                }

                if (events[dateStr]) {
                    dateDiv.classList.add('event');
                    const eventInfo = document.createElement('div');
                    eventInfo.classList.add('event-info');
                    events[dateStr].forEach(event => {
                        eventInfo.innerHTML += `<strong>${event.name}</strong>: ${event.TimeIn} - ${event.TimeOut}<br>`;
                    });
                    dateDiv.appendChild(eventInfo);
                }

                datesEl.appendChild(dateDiv);
            }
        }

        function showPreviousMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            drawCalendar(currentMonth, currentYear);
        }

        function showNextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            drawCalendar(currentMonth, currentYear);
        }

        // Event listeners for buttons
        document.getElementById('prevMonth').addEventListener('click', showPreviousMonth);
        document.getElementById('nextMonth').addEventListener('click', showNextMonth);

        // Initial calendar draw
        drawCalendar(currentMonth, currentYear);
    </script>

</body>
</html>
